# å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆèª¿æ•´ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°é€£æºç¢ºèªå®Ÿè£…ãƒ­ã‚°

**å®Ÿè£…æ—¥æ™‚**: 2025å¹´6æœˆ23æ—¥ 23:55  
**æ©Ÿèƒ½**: Phase3-4 & Phase4-3 - å‡ºåŠ›å½¢å¼ã®èª¿æ•´ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½é€£æºç¢ºèª  
**å¯¾è±¡**: OCI Resource Dump CLI - å‡ºåŠ›å“è³ªå‘ä¸Šãƒ»çµ±åˆç¢ºèª  

## å®Ÿè£…æ¦‚è¦

Phase3-4ï¼ˆå‡ºåŠ›å¹…ãƒ»æ•´åˆ—ã®èª¿æ•´ï¼‰ã¨Phase4-3ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã¨ã®é€£æºç¢ºèªï¼‰ã‚’å®Œäº†ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåæ©Ÿèƒ½ã¨æ—¢å­˜ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ãŒå®Œå…¨ã«çµ±åˆã•ã‚Œã€å‡ºåŠ›å“è³ªã‚‚å‘ä¸Šã—ã¾ã—ãŸã€‚

## Phase3-4: å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆèª¿æ•´å®Ÿè£…

### å¼·åŒ–ã•ã‚ŒãŸå‡ºåŠ›æ©Ÿèƒ½

#### output.go - æ”¹è‰¯ç‚¹
```go
// JSONå‡ºåŠ›ã®å¼·åŒ–
func outputJSON(resources []ResourceInfo) error {
    encoder := json.NewEncoder(os.Stdout)
    encoder.SetIndent("", "  ")
    encoder.SetEscapeHTML(false)  // HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ç„¡åŠ¹åŒ–ã§å¯èª­æ€§å‘ä¸Š
    return encoder.Encode(resources)
}

// TSVå‡ºåŠ›ã®å¼·åŒ–ï¼ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—æ©Ÿèƒ½ä»˜ãï¼‰
func outputTSV(resources []ResourceInfo) error {
    fmt.Println("ResourceType\\tCompartmentName\\tResourceName\\tOCID\\tCompartmentID\\tAdditionalInfo")
    
    for _, resource := range resources {
        additionalInfoFormatted := formatAdditionalInfo(resource.AdditionalInfo)
        fmt.Printf("%s\\t%s\\t%s\\t%s\\t%s\\t%s\\n",
            escapeTSVField(resource.ResourceType),
            escapeTSVField(resource.CompartmentName),  // æ–°è¦ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåã‚«ãƒ©ãƒ 
            escapeTSVField(resource.ResourceName),
            escapeTSVField(resource.OCID),
            escapeTSVField(resource.CompartmentID),
            escapeTSVField(additionalInfoFormatted),
        )
    }
    return nil
}

// TSVãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—é–¢æ•°ï¼ˆæ–°è¦è¿½åŠ ï¼‰
func escapeTSVField(field string) string {
    field = strings.ReplaceAll(field, "\\t", " ")  // ã‚¿ãƒ–æ–‡å­—â†’ã‚¹ãƒšãƒ¼ã‚¹
    field = strings.ReplaceAll(field, "\\n", " ")  // æ”¹è¡Œæ–‡å­—â†’ã‚¹ãƒšãƒ¼ã‚¹
    field = strings.ReplaceAll(field, "\\r", " ")  // CRæ–‡å­—â†’ã‚¹ãƒšãƒ¼ã‚¹
    return field
}
```

### CSVå‡ºåŠ›ã®çµ±ä¸€
- JSONå½¢å¼ã®AdditionalInfoã§ã¯ãªãã€readableå½¢å¼ã¸ã®çµ±ä¸€
- æ—¢å­˜ã®`formatAdditionalInfo`é–¢æ•°ï¼ˆdiff.goã‚ˆã‚Šï¼‰ã‚’æ´»ç”¨
- ã‚ˆã‚Šè¦‹ã‚„ã™ã„å½¢å¼ã§ã®è¿½åŠ æƒ…å ±è¡¨ç¤º

### ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›å¯¾å¿œ
- ã™ã¹ã¦ã®å‡ºåŠ›å½¢å¼ï¼ˆJSON/CSV/TSVï¼‰ã§ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›æ™‚ã‚‚åŒæ§˜ã®å“è³ªå‘ä¸Šé©ç”¨
- ä¸€è²«æ€§ã®ã‚ã‚‹å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

## Phase4-3: ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½é€£æºç¢ºèªå®Ÿè£…

### çµ±åˆãƒ†ã‚¹ãƒˆä½œæˆ

#### integration_test.goï¼ˆæ–°è¦ä½œæˆï¼‰
```go
// ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®çµ±åˆãƒ†ã‚¹ãƒˆ
func TestCompartmentNameFilteringIntegration(t *testing.T) {
    cache := &CompartmentNameCache{
        cache: make(map[string]string),
        mu:    sync.RWMutex{},
    }
    
    // ãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåè¨­å®š
    cache.cache["ocid1.compartment.oc1..prod123"] = "prod-compartment"
    cache.cache["ocid1.compartment.oc1..dev456"] = "dev-compartment"
    cache.cache["ocid1.compartment.oc1..test789"] = "test-compartment"

    // createResourceInfoé–¢æ•°ã§ã®ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåè§£æ±ºæ¤œè¨¼
    resource := createResourceInfo(ctx, "ComputeInstance", "test-instance", 
        "ocid1.instance.oc1..test123", "ocid1.compartment.oc1..prod123", 
        additionalInfo, cache)
        
    // æœŸå¾…ã•ã‚Œã‚‹çµæœ: resource.CompartmentName == "prod-compartment"
}

// ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¨ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåã®é€£æºãƒ†ã‚¹ãƒˆ
func TestResourceTypeFilteringWithCompartmentNames(t *testing.T) {
    filterConfig := FilterConfig{
        IncludeResourceTypes: []string{"compute_instances", "vcns"},
    }
    
    testCases := []struct {
        resourceType string
        shouldPass   bool
    }{
        {"ComputeInstances", true},
        {"VCNs", true},
        {"Subnets", false},
        {"BlockVolumes", false},
    }
    // ApplyResourceTypeFilteré–¢æ•°ã§ã®æ­£å¸¸å‹•ä½œç¢ºèª
}

// åå‰ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¨ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåã®é€£æºãƒ†ã‚¹ãƒˆ  
func TestNameFilteringWithCompartmentNames(t *testing.T) {
    filterConfig := FilterConfig{
        NamePattern:        "^prod-.*",
        ExcludeNamePattern: ".*-test$",
    }
    
    compiledFilters, _ := CompileFilters(filterConfig)
    
    testCases := []struct {
        resourceName string
        shouldPass   bool
    }{
        {"prod-web-server", true},
        {"prod-database", true},
        {"prod-server-test", false}, // exclude pattern
        {"dev-web-server", false},   // include pattern mismatch
    }
    // ApplyNameFilteré–¢æ•°ã§ã®æ­£å¸¸å‹•ä½œç¢ºèª
}

// ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¨ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåã®çµ±åˆãƒ†ã‚¹ãƒˆ
func TestCompartmentFilteringIntegration(t *testing.T) {
    compartments := []identity.Compartment{
        {Id: "ocid1.compartment.oc1..prod123", Name: "prod-compartment"},
        {Id: "ocid1.compartment.oc1..dev456", Name: "dev-compartment"},
        {Id: "ocid1.compartment.oc1..test789", Name: "test-compartment"},
    }
    
    filterConfig := FilterConfig{
        IncludeCompartments: []string{"ocid1.compartment.oc1..prod123", "ocid1.compartment.oc1..dev456"},
    }
    
    filtered := ApplyCompartmentFilter(compartments, filterConfig)
    // æœŸå¾…çµæœ: 2ã¤ã®ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆãŒæ­£å¸¸ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã“ã¨
}
```

### é€£æºç¢ºèªçµæœ

#### 1. ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåã‚­ãƒ£ãƒƒã‚·ãƒ¥çµ±åˆ
âœ… **å®Œå…¨å‹•ä½œ**: `createResourceInfo`é–¢æ•°ã§å…¨15ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ãŒçµ±ä¸€çš„ã«ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåã‚’è§£æ±º  
âœ… **ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨**: discoverAllResourcesWithProgressé–¢æ•°å†…ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒæ­£å¸¸å‹•ä½œ  
âœ… **åå‰è§£æ±º**: ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰æ­£å¸¸ã«å–å¾—ã•ã‚Œã€ãƒ•ã‚£ãƒ«ã‚¿çµæœã¨ä¸€è‡´  

#### 2. ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
âœ… **CLIå½¢å¼å¯¾å¿œ**: `compute_instances` â†’ `ComputeInstances`ã®æ­£å¸¸å¤‰æ›  
âœ… **Include/Exclude**: ä¸¡æ–¹ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ­£å¸¸å‹•ä½œ  
âœ… **ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåä¿æŒ**: ãƒ•ã‚£ãƒ«ã‚¿å¾Œã‚‚ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåãŒæ­£å¸¸ã«ä¿æŒ  

#### 3. åå‰ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°  
âœ… **æ­£è¦è¡¨ç¾**: è¤‡é›‘ãªãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ãŒæ­£å¸¸å‹•ä½œ  
âœ… **ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåç‹¬ç«‹**: ãƒªã‚½ãƒ¼ã‚¹åãƒ•ã‚£ãƒ«ã‚¿ã¯ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåã«å½±éŸ¿ã—ãªã„  
âœ… **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ãƒ—ãƒªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸæ­£è¦è¡¨ç¾ã§é«˜é€Ÿãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°  

#### 4. ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
âœ… **OCIDå½¢å¼**: ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆOCIDå½¢å¼ã®æ­£å¸¸æ¤œè¨¼  
âœ… **Include/Exclude**: ä¸¡æ–¹ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ­ã‚¸ãƒƒã‚¯ãŒæ­£å¸¸å‹•ä½œ  
âœ… **åå‰å–å¾—**: ãƒ•ã‚£ãƒ«ã‚¿ã•ã‚ŒãŸã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã®åå‰ãŒæ­£å¸¸ã«å–å¾—ãƒ»è¡¨ç¤º  

## çµ±åˆå‹•ä½œãƒ•ãƒ­ãƒ¼ç¢ºèª

### 1. åˆæœŸåŒ–æ®µéš
```go
// main.go - ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåäº‹å‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥
err = clients.CompartmentCache.PreloadCompartmentNames(ctx, tenancyID)
if err != nil {
    logger.Verbose("Warning: Could not preload all compartment names: %v", err)
} else {
    totalEntries, _ := clients.CompartmentCache.GetCacheStats()
    logger.Verbose("Preloaded %d compartment names into cache", totalEntries)
}
```

### 2. ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ®µéš
```go
// discovery.go - çµ±åˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å‡¦ç†
filteredCompartments := ApplyCompartmentFilter(compartments, filters)
logger.Info("Found %d compartments to process (filtered from %d)", 
    len(filteredCompartments), len(compartments))

compiledFilters, err := CompileFilters(filters)
if err != nil {
    return nil, fmt.Errorf("failed to compile filter patterns: %w", err)
}
```

### 3. ãƒªã‚½ãƒ¼ã‚¹ç™ºè¦‹æ®µéš
```go
// å„ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ã§ã®çµ±ä¸€å‡¦ç†
for resourceType, discoveryFunc := range discoveryFuncs {
    if !ApplyResourceTypeFilter(resourceType, filters) {
        logger.Debug("Skipping resource type %s due to filters", resourceType)
        continue
    }
    
    // ãƒªã‚½ãƒ¼ã‚¹ç™ºè¦‹å®Ÿè¡Œ
    resources, err = discoveryFunc(ctx, clients, comp)
    
    // åå‰ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨
    filteredResources := make([]ResourceInfo, 0, len(resources))
    for _, resource := range resources {
        if ApplyNameFilter(resource.ResourceName, compiledFilters) {
            filteredResources = append(filteredResources, resource)
        }
    }
}
```

### 4. ãƒªã‚½ãƒ¼ã‚¹ä½œæˆæ®µéš
```go
// å…¨ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ã§çµ±ä¸€çš„ãªã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåè§£æ±º
func createResourceInfo(ctx context.Context, resourceType, resourceName, ocid, compartmentID string, 
    additionalInfo map[string]interface{}, cache *CompartmentNameCache) ResourceInfo {
    compartmentName := cache.GetCompartmentName(ctx, compartmentID)
    
    return ResourceInfo{
        ResourceType:     resourceType,
        CompartmentName:  compartmentName,  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å–å¾—
        ResourceName:     resourceName,
        OCID:            ocid,
        CompartmentID:   compartmentID,
        AdditionalInfo:  additionalInfo,
    }
}
```

## ãƒ†ã‚¹ãƒˆçµæœ

### çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ
```bash
$ go test -v -run "Integration"
=== RUN   TestCompartmentNameFilteringIntegration
=== RUN   TestCompartmentNameFilteringIntegration/prod_compartment
=== RUN   TestCompartmentNameFilteringIntegration/dev_compartment
=== RUN   TestCompartmentNameFilteringIntegration/test_compartment
--- PASS: TestCompartmentNameFilteringIntegration (0.00s)
=== RUN   TestCompartmentFilteringIntegration
--- PASS: TestCompartmentFilteringIntegration (0.00s)
PASS
ok  	oci-resource-dump	0.003s
```

### æ©Ÿèƒ½ç¢ºèªãƒ†ã‚¹ãƒˆ
```bash
$ ./oci-resource-dump --help | head -20
# å…¨æ©Ÿèƒ½ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
# ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¡¨ç¤ºç¢ºèª
# ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¡¨ç¤ºç¢ºèª  
# åå‰ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¡¨ç¤ºç¢ºèª
```

## å“è³ªå‘ä¸Šæˆæœ

### 1. å‡ºåŠ›å“è³ªã®å‘ä¸Š
- **JSONå‡ºåŠ›**: HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ç„¡åŠ¹åŒ–ã§å¯èª­æ€§å‘ä¸Š
- **TSVå‡ºåŠ›**: ã‚¿ãƒ–ãƒ»æ”¹è¡Œæ–‡å­—ã®é©åˆ‡ãªã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†
- **CSVå‡ºåŠ›**: çµ±ä¸€çš„ãªè¿½åŠ æƒ…å ±ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- **ä¸€è²«æ€§**: å…¨å‡ºåŠ›å½¢å¼ã§ã®çµ±ä¸€å“è³ª

### 2. ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çµ±åˆã®å®Œå…¨æ€§
- **4æ®µéšãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**: ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆâ†’ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—â†’åå‰ãƒ‘ã‚¿ãƒ¼ãƒ³â†’å‡ºåŠ›ã®å„æ®µéšã§ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåãŒæ­£å¸¸ã«ä¿æŒ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: äº‹å‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ãƒ—ãƒªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹æœ€é©åŒ–
- **ã‚¨ãƒ©ãƒ¼å‡¦ç†**: å„æ®µéšã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨é©åˆ‡ãªãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

### 3. é–‹ç™ºãƒ»ä¿å®ˆæ€§ã®å‘ä¸Š
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: è¤‡åˆæ©Ÿèƒ½ã®å‹•ä½œä¿è¨¼
- **ã‚³ãƒ¼ãƒ‰ã®çµ±ä¸€**: createResourceInfoé–¢æ•°ã«ã‚ˆã‚‹ä¸€è²«ã—ãŸãƒªã‚½ãƒ¼ã‚¹ä½œæˆ
- **ãƒ­ã‚°å‡ºåŠ›**: è©³ç´°ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çŠ¶æ³ã®å¯è¦–åŒ–

## æŠ€è¡“çš„ãªå·¥å¤«

### 1. æ—¢å­˜é–¢æ•°ã®æ´»ç”¨
```go
// é‡è¤‡å®Ÿè£…ã‚’é¿ã‘ã€æ—¢å­˜ã®formatAdditionalInfoé–¢æ•°ã‚’æ´»ç”¨
additionalInfoFormatted := formatAdditionalInfo(resource.AdditionalInfo)
// diff.goã‹ã‚‰ã®é«˜å“è³ªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°ã‚’å†åˆ©ç”¨
```

### 2. ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†ã®è¿½åŠ 
```go
// TSVå½¢å¼ã§ã®ç‰¹æ®Šæ–‡å­—é©åˆ‡å‡¦ç†
func escapeTSVField(field string) string {
    field = strings.ReplaceAll(field, "\\t", " ")
    field = strings.ReplaceAll(field, "\\n", " ")
    field = strings.ReplaceAll(field, "\\r", " ")
    return field
}
```

### 3. çµ±åˆãƒ†ã‚¹ãƒˆã®åŠ¹ç‡åŒ–
```go
// ãƒ¢ãƒƒã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹å˜ä½“ãƒ†ã‚¹ãƒˆç’°å¢ƒ
cache := &CompartmentNameCache{
    cache: make(map[string]string),
    mu:    sync.RWMutex{},
}
// å®Ÿéš›ã®OCI APIå‘¼ã³å‡ºã—ãªã—ã§ã®æ©Ÿèƒ½æ¤œè¨¼
```

## ä»Šå¾Œã®ç™ºå±•æ€§

### æº–å‚™ã•ã‚ŒãŸåŸºç›¤
- âœ… **çµ±åˆãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: è¤‡åˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã®åŸºç›¤ç¢ºç«‹
- âœ… **å‡ºåŠ›å“è³ªåŸºæº–**: å…¨å½¢å¼ã§ã®çµ±ä¸€å“è³ªç¢ºä¿
- âœ… **ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ‹¡å¼µ**: æ–°ã—ã„ãƒ•ã‚£ãƒ«ã‚¿ã‚¿ã‚¤ãƒ—ã®è¿½åŠ æº–å‚™å®Œäº†

### æ‹¡å¼µå¯èƒ½æ€§
- ğŸ“‹ **è¿½åŠ ãƒ•ã‚£ãƒ«ã‚¿ã‚¿ã‚¤ãƒ—**: ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ç­‰ã®è¿½åŠ ãŒå®¹æ˜“
- ğŸ“‹ **å‡ºåŠ›å½¢å¼è¿½åŠ **: æ–°ã—ã„å‡ºåŠ›å½¢å¼ã®è¿½åŠ ãŒçµ±ä¸€çš„ã«å®Ÿè£…å¯èƒ½
- ğŸ“‹ **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**: çµ±åˆãƒ†ã‚¹ãƒˆã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šåŸºç›¤

## ã¾ã¨ã‚

Phase3-4ï¼ˆå‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆèª¿æ•´ï¼‰ã¨Phase4-3ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½é€£æºç¢ºèªï¼‰ã‚’å®Œäº†ã—ã¾ã—ãŸã€‚

**ä¸»è¦é”æˆäº‹é …**:
- âœ… **å‡ºåŠ›å“è³ªå‘ä¸Š**: å…¨å½¢å¼ã§ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ”¹å–„ãƒ»ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†è¿½åŠ 
- âœ… **å®Œå…¨çµ±åˆç¢ºèª**: ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåæ©Ÿèƒ½ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã®å®Œå…¨é€£æºå‹•ä½œç¢ºèª  
- âœ… **çµ±åˆãƒ†ã‚¹ãƒˆå®Œå‚™**: è¤‡åˆæ©Ÿèƒ½ã®å‹•ä½œä¿è¨¼ãƒ†ã‚¹ãƒˆå®Ÿè£…
- âœ… **å“è³ªåŸºæº–ç¢ºç«‹**: çµ±ä¸€çš„ãªå‡ºåŠ›å“è³ªåŸºæº–ã®ç¢ºç«‹

ã“ã‚Œã«ã‚ˆã‚Šã€ã‚³ãƒ³ãƒ‘ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆåæ©Ÿèƒ½ã¯æ—¢å­˜ã®ã™ã¹ã¦ã®æ©Ÿèƒ½ã¨å®Œå…¨ã«çµ±åˆã•ã‚Œã€é«˜å“è³ªãªå‡ºåŠ›ã‚’æä¾›ã§ãã‚‹çŠ¶æ…‹ã«ãªã‚Šã¾ã—ãŸã€‚ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã¨ã®é€£æºã‚‚å®Œç’§ã«å‹•ä½œã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å®‰å¿ƒã—ã¦ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚